<!doctype html><html lang=en><head><title>Backtrace · systems geek</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=description content="Introduction Link to heading When a program halts abruptly, it is very useful to find out the stack trace of the thread that caused the program to halt. Unfortunately, printing the stacktrace/backtrace in C is not an out of the box functionality provided by the language. We need libraries or use existing tools like debuggers to print the backtrace.
Using GDB (linux) or LLDB (mac) Link to heading LLDB Link to heading Save the following in ."><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Backtrace"><meta name=twitter:description content="Introduction Link to heading When a program halts abruptly, it is very useful to find out the stack trace of the thread that caused the program to halt. Unfortunately, printing the stacktrace/backtrace in C is not an out of the box functionality provided by the language. We need libraries or use existing tools like debuggers to print the backtrace.
Using GDB (linux) or LLDB (mac) Link to heading LLDB Link to heading Save the following in ."><meta property="og:title" content="Backtrace"><meta property="og:description" content="Introduction Link to heading When a program halts abruptly, it is very useful to find out the stack trace of the thread that caused the program to halt. Unfortunately, printing the stacktrace/backtrace in C is not an out of the box functionality provided by the language. We need libraries or use existing tools like debuggers to print the backtrace.
Using GDB (linux) or LLDB (mac) Link to heading LLDB Link to heading Save the following in ."><meta property="og:type" content="article"><meta property="og:url" content="https://srgsanky.github.io/cprogramming/backtrace/"><meta property="article:section" content="cprogramming"><meta property="article:published_time" content="2023-06-16T18:39:50-07:00"><meta property="article:modified_time" content="2023-06-16T18:39:50-07:00"><link rel=canonical href=https://srgsanky.github.io/cprogramming/backtrace/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.5adbe72fc41dcfb852215b84695288939b6b606db73238bd3ee936469572fc9c.css integrity="sha256-WtvnL8Qdz7hSIVuEaVKIk5trYG23Mji9Puk2RpVy/Jw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>systems geek</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/cprogramming/>c programming</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://srgsanky.github.io/cprogramming/backtrace/>Backtrace</a></h1></header><h2 id=introduction>Introduction
<a class=heading-link href=#introduction><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>When a program halts abruptly, it is very useful to find out the stack trace of the
thread that caused the program to halt. Unfortunately, printing the stacktrace/backtrace
in C is not an out of the box functionality provided by the language. We need libraries
or use existing tools like debuggers to print the backtrace.</p><h2 id=using-gdb-linux-or-lldb-mac>Using GDB (linux) or LLDB (mac)
<a class=heading-link href=#using-gdb-linux-or-lldb-mac><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h3 id=lldb>LLDB
<a class=heading-link href=#lldb><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Save the following in .lldbinit</p><pre tabindex=0><code>target stop-hook add --one-liner &#34;thread backtrace&#34;
</code></pre><p>Now run the program under lldb</p><div class=highlight><div style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lldb --no-lldbinit --source-quietly <span style=color:#b8bb26>\
</span></span></span><span style=display:flex><span><span style=color:#b8bb26></span>    --source .lldbinit <span style=color:#b8bb26>\
</span></span></span><span style=display:flex><span><span style=color:#b8bb26></span>    cmake-build-debug/TryPointers <span style=color:#b8bb26>\
</span></span></span><span style=display:flex><span><span style=color:#b8bb26></span>    --one-line <span style=color:#b8bb26>&#34;process launch&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span>lldb --no-lldbinit --source-quietly <span style=color:#b8bb26>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span><span style=color:#b8bb26></span>    --source .lldbinit <span style=color:#b8bb26>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span><span style=color:#b8bb26></span>    cmake-build-debug/TryPointers <span style=color:#b8bb26>\
</span></span></span><span style=display:flex;background-color:#3d3d3d><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span><span style=color:#b8bb26></span>    --one-line <span style=color:#b8bb26>&#34;process launch&#34;</span></span></span></code></pre></div><p>This will print a backtrace with symbols, filename and line number whenever the program is
stopped due to a signal. Here is an example</p><pre tabindex=0><code>* thread #1, queue = &#39;com.apple.main-thread&#39;, stop reason = EXC_BAD_ACCESS (code=1, address=0x0)
  * frame #0: 0x000000010000399c TryPointers`b_print_matrix(matrix_ptr=0x0000000000000000, num_rows=10, num_columns=5) at matrix_bulk_allocated.c:22:28
    frame #1: 0x0000000100003590 TryPointers`main at main.c:66:5
    frame #2: 0x000000010001108c dyld`start + 520
</code></pre></article></section></div><footer class=footer><section class=container>©
2023
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>